{% extends "layout.html" %}

{% block title %}
Home
{% endblock %}

{% block imports %}
<script
src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
</script>
<script src="{{url_for('static', filename='form.js')}}"></script>
<script src="{{url_for('static', filename='settings.js')}}"></script>
<script src="{{url_for('static', filename='make_chart.js')}}"></script>
{% endblock %}

{% block header %}
{% if current_user.is_authenticated %}
  Welcome {{ current_user.username }}!
{% else %}
  Welcome to CTRL-X!
{% endif %}
{% endblock %}

{% block body %}
<!-- <a href="{{url_for('index.show_scans')}}" >
    <button>Request Data</button>
</a> -->
<div class="container">
  <hr class="hr-blurry" />
</div>
<div class="container text-center">
  <h3>We're so glad you're here to help us in our mission to help make cybersecurity more accessible to everyone!</h3>
</div>
<div class="container">
  <hr class="hr-blurry" />
</div>
{% if current_user.is_authenticated %}

<div class="d-flex flex-row justify-content-center">
  <div class="d-flex flex-row w-25 steps justify-content-end">
    <h3>Step 1</h3>
  </div>
  <div class="card text-center homepage-card">
    <div class="card-body">
      <h5 class="card-title">Request New Job</h5>
      <p class="card-text">Here you can request a new job after inputting a valid ip or ip subnet</p>
      <form id="ip-form">
        <label for="ip_block">IP:</label><br>
        <input type="text" class="form-control" id="ip_block" name="ip_block">
        <input class="small-mt btn btn-primary" type="submit" value="Submit">
        <p class="card-text" id="response" name="response"></p>
      </form>
    </div>
  </div>
  <div class="d-flex flex-row w-25 instruct justify-content-start">
    <h3>Request a new job</h3>
  </div>
</div>
<div class="d-flex flex-row justify-content-center">
  <div class="d-flex flex-row w-25 steps justify-content-end">
    <h3>Step 2</h3>
  </div>
  <div class="d-flex justify-content-center">
    <div class="card text-center homepage-card" >
      <div class="card-body">
        <h5 class="card-title">Scans</h5>
        <p class="card-text">Here you can see historic and current scan jobs requested.</p>
        <a href="{{url_for('index.show_scans')}}" class="btn btn-primary">Go to Data</a>
      </div>
    </div>
    <div class="card text-center homepage-card">
      <div class="card-body">
        <h5 class="card-title">Reports</h5>
        <p class="card-text">Here you can see reports of past scans.</p>
        <a href="{{url_for('index.list_reports')}}" class="btn btn-primary">Go to Reports</a>
      </div>
    </div>
  </div>
  <div class="d-flex flex-row w-25 instruct justify-content-start">
    <h3>View Scans and Reports</h3>
  </div>
</div>
<div class="container" style="margin-top:2em">
  <hr class="hr-blurry" />
</div>
<div class="d-flex justify-content-center">
  <div class="card text-center homepage-card">
    <div class="card-body">
      <h5 class="card-title">Manage users</h5>
      <p class="card-text">Here you can view users that have access to this portal and create new users.</p>
      <a href="{{url_for('index.users')}}" class="btn btn-primary">View other users</a>
      <br>
      <br>
      <a href="{{url_for('index.register')}}" class="btn btn-primary">Register new users</a>
    </div>
  </div>
  <div class="card text-center homepage-card">
    <div class="card-body">
      <h5 class="card-title">Settings</h5>
      <p class="card-text">Here you can write a custom nmap scan to run</p>
      <form id="command-form">
        <label for="command">New Nmap Args:</label><br>
        <input type="text" class="form-control" id="command" name="command">
        <label for="command" style="margin-top:10%">DNS:</label><br>
        <input type="text" class="form-control" id="dns" name="dns">
        <input class="small-mt btn btn-primary" type="submit" value="Submit">
        <p class="card-text" id="response_settings" name="response_settings"></p>
      </form>
      <button id="def" name="default" type="button" class="btn btn-primary">Default</button>
    </div>
  </div>
</div>
<div class="d-flex justify-content-center">
  <canvas id="scan_chart"></canvas>
</div>
{% endif %}
{% endblock %}